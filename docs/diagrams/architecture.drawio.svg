<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1000px" height="700px" viewBox="-0.5 -0.5 1000 700" content="&lt;mxfile host=&quot;app.diagrams.net&quot;&gt;&lt;diagram name=&quot;Architecture&quot; id=&quot;cerebricep-architecture&quot;&gt;&lt;mxGraphModel dx=&quot;1000&quot; dy=&quot;700&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;1000&quot; pageHeight=&quot;700&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&lt;root&gt;&lt;mxCell id=&quot;0&quot;/&gt;&lt;mxCell id=&quot;1&quot; parent=&quot;0&quot;/&gt;&lt;mxCell id=&quot;azure-sub&quot; value=&quot;Azure Subscription&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;verticalAlign=top;fontStyle=1;fontSize=14;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;20&quot; y=&quot;20&quot; width=&quot;960&quot; height=&quot;660&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;rg&quot; value=&quot;Resource Group (rg-cerebricep-{env})&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;verticalAlign=top;fontStyle=1;fontSize=12;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;40&quot; y=&quot;60&quot; width=&quot;920&quot; height=&quot;600&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;func&quot; value=&quot;Azure Functions&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;80&quot; y=&quot;120&quot; width=&quot;140&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;cosmos&quot; value=&quot;Cosmos DB&amp;#xa;(NoSQL)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;280&quot; y=&quot;120&quot; width=&quot;140&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;docint&quot; value=&quot;Document&amp;#xa;Intelligence&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;480&quot; y=&quot;120&quot; width=&quot;140&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;storage&quot; value=&quot;Storage Account&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;80&quot; y=&quot;260&quot; width=&quot;140&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;kv&quot; value=&quot;Key Vault&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;280&quot; y=&quot;260&quot; width=&quot;140&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;appconfig&quot; value=&quot;App Configuration&amp;#xa;(Feature Flags)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;480&quot; y=&quot;260&quot; width=&quot;140&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;identity&quot; value=&quot;User-Assigned Managed Identity&amp;#xa;(Passwordless auth to all services)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1;fontColor=#333333;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;80&quot; y=&quot;400&quot; width=&quot;540&quot; height=&quot;60&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;appi&quot; value=&quot;Application&amp;#xa;Insights&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;80&quot; y=&quot;520&quot; width=&quot;140&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;law&quot; value=&quot;Log Analytics&amp;#xa;Workspace&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;280&quot; y=&quot;520&quot; width=&quot;140&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;github&quot; value=&quot;GitHub Actions&amp;#xa;(OIDC)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1;fontColor=#333333;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;700&quot; y=&quot;120&quot; width=&quot;140&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;aad&quot; value=&quot;Azure AD&amp;#xa;(Workload Identity)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;700&quot; y=&quot;260&quot; width=&quot;140&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;edge1&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;func&quot; target=&quot;cosmos&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;edge2&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;func&quot; target=&quot;storage&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;edge3&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;func&quot; target=&quot;kv&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;edge4&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;func&quot; target=&quot;appconfig&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;edge5&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;func&quot; target=&quot;docint&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;edge6&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;storage&quot; target=&quot;docint&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;edge7&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;appi&quot; target=&quot;law&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;edge8&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;github&quot; target=&quot;aad&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;edge9&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;aad&quot; target=&quot;identity&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;/mxfile&gt;">
  <defs/>
  <g>
    <!-- Azure Subscription -->
    <rect x="20" y="20" width="960" height="660" rx="12" ry="12" fill="#dae8fc" stroke="#6c8ebf" stroke-width="2"/>
    <text x="500" y="45" font-family="Helvetica" font-size="14" font-weight="bold" text-anchor="middle">Azure Subscription</text>
    
    <!-- Resource Group -->
    <rect x="40" y="60" width="920" height="600" rx="10" ry="10" fill="#fff2cc" stroke="#d6b656" stroke-width="2"/>
    <text x="500" y="85" font-family="Helvetica" font-size="12" font-weight="bold" text-anchor="middle">Resource Group (rg-cerebricep-{env})</text>
    
    <!-- Azure Functions -->
    <rect x="80" y="120" width="140" height="80" rx="8" ry="8" fill="#e1d5e7" stroke="#9673a6" stroke-width="2"/>
    <text x="150" y="165" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">Azure Functions</text>
    
    <!-- Cosmos DB -->
    <rect x="280" y="120" width="140" height="80" rx="8" ry="8" fill="#d5e8d4" stroke="#82b366" stroke-width="2"/>
    <text x="350" y="155" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">Cosmos DB</text>
    <text x="350" y="175" font-family="Helvetica" font-size="10" text-anchor="middle">(NoSQL)</text>
    
    <!-- Document Intelligence -->
    <rect x="480" y="120" width="140" height="80" rx="8" ry="8" fill="#f8cecc" stroke="#b85450" stroke-width="2"/>
    <text x="550" y="155" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">Document</text>
    <text x="550" y="175" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">Intelligence</text>
    
    <!-- Storage Account -->
    <rect x="80" y="260" width="140" height="80" rx="8" ry="8" fill="#d5e8d4" stroke="#82b366" stroke-width="2"/>
    <text x="150" y="305" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">Storage Account</text>
    
    <!-- Key Vault -->
    <rect x="280" y="260" width="140" height="80" rx="8" ry="8" fill="#ffe6cc" stroke="#d79b00" stroke-width="2"/>
    <text x="350" y="305" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">Key Vault</text>
    
    <!-- App Configuration -->
    <rect x="480" y="260" width="140" height="80" rx="8" ry="8" fill="#ffe6cc" stroke="#d79b00" stroke-width="2"/>
    <text x="550" y="295" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">App Configuration</text>
    <text x="550" y="315" font-family="Helvetica" font-size="10" text-anchor="middle">(Feature Flags)</text>
    
    <!-- Managed Identity -->
    <rect x="80" y="400" width="540" height="60" rx="8" ry="8" fill="#f5f5f5" stroke="#666666" stroke-width="2"/>
    <text x="350" y="425" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">User-Assigned Managed Identity</text>
    <text x="350" y="445" font-family="Helvetica" font-size="10" text-anchor="middle">(Passwordless auth to all services)</text>
    
    <!-- Application Insights -->
    <rect x="80" y="520" width="140" height="80" rx="8" ry="8" fill="#e1d5e7" stroke="#9673a6" stroke-width="2"/>
    <text x="150" y="555" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">Application</text>
    <text x="150" y="575" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">Insights</text>
    
    <!-- Log Analytics -->
    <rect x="280" y="520" width="140" height="80" rx="8" ry="8" fill="#e1d5e7" stroke="#9673a6" stroke-width="2"/>
    <text x="350" y="555" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">Log Analytics</text>
    <text x="350" y="575" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">Workspace</text>
    
    <!-- GitHub Actions -->
    <rect x="700" y="120" width="140" height="80" rx="8" ry="8" fill="#f5f5f5" stroke="#666666" stroke-width="2"/>
    <text x="770" y="155" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">GitHub Actions</text>
    <text x="770" y="175" font-family="Helvetica" font-size="10" text-anchor="middle">(OIDC)</text>
    
    <!-- Azure AD -->
    <rect x="700" y="260" width="140" height="80" rx="8" ry="8" fill="#dae8fc" stroke="#6c8ebf" stroke-width="2"/>
    <text x="770" y="295" font-family="Helvetica" font-size="11" font-weight="bold" text-anchor="middle">Azure AD</text>
    <text x="770" y="315" font-family="Helvetica" font-size="10" text-anchor="middle">(Workload Identity)</text>
    
    <!-- Connections -->
    <!-- Functions to Cosmos -->
    <path d="M 220 160 L 280 160" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrow)"/>
    <!-- Functions to Doc Intelligence -->
    <path d="M 220 160 L 250 160 L 250 100 L 550 100 L 550 120" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrow)"/>
    <!-- Functions to Storage -->
    <path d="M 150 200 L 150 260" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrow)"/>
    <!-- Functions to Key Vault -->
    <path d="M 220 180 L 250 180 L 250 300 L 280 300" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrow)"/>
    <!-- Functions to App Config -->
    <path d="M 220 170 L 240 170 L 240 240 L 550 240 L 550 260" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrow)"/>
    <!-- Storage to Doc Intelligence -->
    <path d="M 220 300 L 450 300 L 450 200 L 480 200" fill="none" stroke="#333333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow)"/>
    <!-- App Insights to Log Analytics -->
    <path d="M 220 560 L 280 560" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrow)"/>
    <!-- GitHub to Azure AD -->
    <path d="M 770 200 L 770 260" fill="none" stroke="#333333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow)"/>
    <!-- Azure AD to Identity -->
    <path d="M 700 300 L 650 300 L 650 430 L 620 430" fill="none" stroke="#333333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow)"/>
    
    <!-- Arrow marker definition -->
    <defs>
      <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
        <path d="M0,0 L0,6 L9,3 z" fill="#333333"/>
      </marker>
    </defs>
    
    <!-- Legend -->
    <rect x="700" y="400" width="240" height="200" rx="8" ry="8" fill="white" stroke="#cccccc" stroke-width="1"/>
    <text x="820" y="425" font-family="Helvetica" font-size="12" font-weight="bold" text-anchor="middle">Legend</text>
    
    <rect x="720" y="445" width="20" height="15" fill="#e1d5e7" stroke="#9673a6"/>
    <text x="750" y="457" font-family="Helvetica" font-size="10">Compute / Monitoring</text>
    
    <rect x="720" y="470" width="20" height="15" fill="#d5e8d4" stroke="#82b366"/>
    <text x="750" y="482" font-family="Helvetica" font-size="10">Data Services</text>
    
    <rect x="720" y="495" width="20" height="15" fill="#ffe6cc" stroke="#d79b00"/>
    <text x="750" y="507" font-family="Helvetica" font-size="10">Configuration</text>
    
    <rect x="720" y="520" width="20" height="15" fill="#f8cecc" stroke="#b85450"/>
    <text x="750" y="532" font-family="Helvetica" font-size="10">AI Services</text>
    
    <rect x="720" y="545" width="20" height="15" fill="#dae8fc" stroke="#6c8ebf"/>
    <text x="750" y="557" font-family="Helvetica" font-size="10">Identity / Platform</text>
    
    <line x1="720" y1="575" x2="740" y2="575" stroke="#333333" stroke-width="2"/>
    <text x="750" y="580" font-family="Helvetica" font-size="10">Data Flow</text>
    
    <line x1="720" y1="590" x2="740" y2="590" stroke="#333333" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="750" y="595" font-family="Helvetica" font-size="10">Auth Flow</text>
  </g>
</svg>
